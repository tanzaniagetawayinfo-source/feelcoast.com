<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Feel Coast — Coming Soon</title>

<meta name="description" content="Curated beach & sunset events. Coming soon." />

<style>
/* =====================
   RESET
===================== */
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  background: #000;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  overflow: hidden;
}

/* =====================
   ABOUT TRANSITION (fake scroll page)
===================== */
.about-overlay {
  position: fixed;
  inset: 0;
  z-index: 3;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 80px 28px 120px;
  backdrop-filter: blur(0px);
  background: rgba(0,0,0,0);
  transform: translateY(100%);
  transition: transform 0.8s ease, backdrop-filter 0.8s ease, background 0.8s ease;
}

.about-overlay.active {
  transform: translateY(0);
  backdrop-filter: blur(12px);
  background: rgba(0,0,0,0.35);
}

.about-content {
  max-width: 520px;
  color: rgba(255,255,255,0.92);
  line-height: 1.6;
}

.about-title {
  font-size: 18px;
  letter-spacing: 0.35em;
  margin-bottom: 18px;
}

.about-text {
  font-size: 15px;
  opacity: 0.85;
}

/* Instagram under About */
.about-instagram {
  margin-top: 28px;
  text-align: center;
}

.about-instagram a {
  color: rgba(255,255,255,0.92);
  text-decoration: none;
  font-size: 14px;
  letter-spacing: 0.25em;
  border-bottom: 1px solid rgba(255,255,255,0.4);
  padding-bottom: 4px;
  transition: opacity 0.3s ease;
}

.about-instagram a:hover {
  opacity: 0.6;
}


/* =====================
   VIDEO BACKGROUND
===================== */
.video-bg {
  position: fixed;
  inset: 0;
  z-index: 1;
}

.video-bg video {
  width: 100%;
  height: 100%;
  object-fit: cover;
  filter: contrast(1.15) saturate(0.85) brightness(0.9);
}

/* =====================
   EFFECTS
===================== */
.vignette {
  position: fixed;
  inset: 0;
  z-index: 2;
  background: radial-gradient(
    ellipse at center,
    rgba(0,0,0,0.15) 0%,
    rgba(0,0,0,0.6) 70%,
    rgba(0,0,0,0.9) 100%
  );
  pointer-events: none;
}

.grain {
  position: fixed;
  inset: 0;
  z-index: 3;
  background: repeating-linear-gradient(
    0deg,
    rgba(255,255,255,0.04),
    rgba(255,255,255,0.04) 1px,
    transparent 1px,
    transparent 2px
  );
  opacity: 0.25;
  mix-blend-mode: overlay;
  animation: grainMove 0.8s steps(2) infinite;
  pointer-events: none;
}

/* =====================
   CENTER
===================== */
.center {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 4;
  text-align: center;
  transition: transform 0.8s ease;
}

/* Logo always visible */
.logo {
  width: 70vw;
  max-width: 320px;
  display: block;
  margin: 0 auto 18px auto;
  filter: drop-shadow(0 12px 30px rgba(0,0,0,0.6));
}

/* Coming soon under logo with elegant pulse */
.placeholder {
  font-size: 16px;
  letter-spacing: 0.45em;
  color: rgba(255,255,255,0.85);
  white-space: nowrap;
  animation: comingPulse 2.4s ease-in-out infinite;
}

@keyframes comingPulse {
  0% { opacity: 0.35; }
  40% { opacity: 1; }
  60% { opacity: 0.7; }
  100% { opacity: 0.35; }
}

@keyframes grainMove {
  0% { transform: translate(0,0); }
  50% { transform: translate(-1%, 1%); }
  100% { transform: translate(1%, -1%); }
}

/* Move center together with About page */
.about-overlay.active ~ .center {
  /* Move the entire hero completely out of the viewport like a real section */
  transform: translate(-50%, -200vh);
}

/* =====================
   TOP LEFT LOGO
===================== */
.corner-logo {
  position: fixed;
  top: 20px;
  left: 20px;
  z-index: 20;
  width: 96px;
  opacity: 0.85;
  filter: blur(0.05px);
  pointer-events: none;
  transition: opacity 0.6s ease;
}

.corner-logo img {
  width: 100%;
  height: auto;
}

/* =====================
   TOP RIGHT MENU ICON
===================== */
.corner-menu {
  position: fixed;
  top: 22px;
  right: 22px;
  z-index: 20;
  width: 36px;
  opacity: 0.85;
  filter: blur(0.05px);
  cursor: pointer;
  pointer-events: auto;
  transition: opacity 0.6s ease;
}

.corner-menu img {
  width: 100%;
  height: auto;
}

/* =====================
   LOADER
===================== */
.loader {
  position: fixed;
  inset: 0;
  z-index: 10;
  background: #000;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: opacity 0.8s ease;
}

.loader.hidden {
  opacity: 0;
  pointer-events: none;
}

/* Hide UI while loading */
.loader:not(.hidden) ~ .corner-logo,
.loader:not(.hidden) ~ .corner-menu,
.loader:not(.hidden) ~ .sponsors {
  opacity: 0;
  pointer-events: none;
}

.loader-text {
  max-width: 86vw;
  padding: 0 24px;
  text-align: center;
  color: rgba(255,255,255,0.92);
  line-height: 1.4;
}

.loader-quote {
  font-size: 18px;
  letter-spacing: 0.02em;
  /* festival-level subtle flicker */
  animation: quoteFlicker 2.6s ease-in-out infinite;
}

.loader-author {
  margin-top: 12px;
  font-size: 13px;
  letter-spacing: 0.25em;
  opacity: 0.7;
}

@keyframes quoteFlicker {
  0% { opacity: 0.75; }
  12% { opacity: 0.9; }
  18% { opacity: 0.65; }
  26% { opacity: 1; }
  100% { opacity: 0.8; }
}

/* =====================
   SWIPE HINT (above sponsors)
===================== */
.swipe-hint {
  position: fixed;
  left: 50%;
  bottom: 72px;
  transform: translateX(-50%);
  z-index: 20;
  opacity: 0.75;
  transition: opacity 0.6s ease, transform 0.8s ease;
  pointer-events: none;
}

.swipe-hint img {
  width: 42px;
  height: auto;
}

/* Move swipe together with section 1 when About opens */
.about-open .swipe-hint {
  transform: translate(-50%, -200vh);
}

/* Hide swipe during loading */
.loader:not(.hidden) ~ .swipe-hint {
  opacity: 0;
}

/* =====================
   SPONSORS STRIP (BOTTOM)
===================== */
.sponsors {
  position: fixed;
  left: 0;
  bottom: 16px;
  width: 100%;
  z-index: 20;
  overflow-x: auto;
  overflow-y: hidden;
  pointer-events: auto;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none;
  transition: opacity 0.6s ease;
}

.sponsors::-webkit-scrollbar { display: none; }

.sponsors-track {
  display: flex;
  gap: 28px;
  padding: 0 24px;
  width: max-content;
}

.sponsors-group {
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 28px;
  white-space: nowrap;
}

.sponsor {
  height: 32px;
  display: flex;
  align-items: center;
}

.sponsor img {
  height: 100%;
  max-height: 32px;
  width: auto;
  opacity: 0.75;
  filter: grayscale(100%);
}
</style>
</head>

<body>

<!-- LOADER -->
<div class="loader" id="loader">
  <div class="loader-text">
    <div class="loader-quote">Loading</div>
    <div class="loader-author"></div>
  </div>
</div>

<!-- VIDEO -->
<div class="video-bg">
  <video id="video" muted playsinline preload="auto">
    <source src="background.mp4" type="video/mp4">
  </video>
</div>

<!-- TOP LEFT LOGO -->
<div class="corner-logo">
  <img src="c66f4082-3131-4280-b821-ee43448d156a.png" alt="Feel Coast" loading="eager" decoding="async" />
</div>

<!-- TOP RIGHT MENU ICON -->
<div class="corner-menu" aria-label="Menu" role="button" tabindex="0">
  <img src="menu.png" alt="Menu" loading="eager" decoding="async" />
</div>

<!-- SWIPE HINT -->
<div class="swipe-hint" id="swipeHint" style="display:none;">
  <img src="swipe.png" alt="Swipe" loading="lazy" decoding="async" />
</div>

<!-- SPONSORS STRIP -->
<div class="sponsors" id="sponsors" style="display:none;">
  <div class="sponsors-track" id="sponsorsTrack">
    <div class="sponsors-group" id="sponsorsA"></div>
    <div class="sponsors-group" id="sponsorsB" aria-hidden="true"></div>
  </div>
</div>

<!-- EFFECTS -->
<div class="vignette"></div>
<div class="grain"></div>

<!-- ABOUT OVERLAY (fake second page) -->
<div class="about-overlay" id="aboutOverlay">
  <div class="about-content">
    <div class="about-title">ABOUT</div>
    <div class="about-text">
      Feel Coast Community is a coastal-driven creative collective uniting music, culture and nightlife.
      
      We create immersive experiences inspired by the ocean, rhythm, and global island sounds.
    </div>

    <div class="about-instagram">
      <a href="https://instagram.com/feel.coast" target="_blank" rel="noopener">
        @FEEL.COAST
      </a>
    </div>
  </div>
</div>

<!-- CENTER CONTENT -->
<div class="center" id="center">
  <img
    src="c66f4082-3131-4280-b821-ee43448d156a.png"
    alt="Feel Coast"
    class="logo"
    loading="lazy"
    decoding="async"
  />
  <div class="placeholder" id="placeholder">COMING&nbsp;SOON</div>
</div>
  <img
    src="c66f4082-3131-4280-b821-ee43448d156a.png"
    alt="Feel Coast"
    class="logo"
    loading="lazy"
    decoding="async"
  />
</div>

<script>
const video = document.getElementById('video');
const center = document.getElementById('center');
const loader = document.getElementById('loader');
const LOGO_TIME = 10; // seconds

// =====================
// MENU LAZY LOAD
// =====================
const menuBtn = document.querySelector('.corner-menu');
let menuOpen = false;

async function openMenu() {
  if (menuOpen) return;
  try {
    const html = await fetch('menu.html', { cache: 'no-store' }).then(r => r.text());
    document.body.insertAdjacentHTML('beforeend', html);
    menuOpen = true;

    const observer = new MutationObserver(() => {
      if (!document.querySelector('.menu-overlay')) {
        menuOpen = false;
        observer.disconnect();
      }
    });

    observer.observe(document.body, { childList: true, subtree: true });
  } catch (e) {
    console.error('Menu load failed', e);
    menuOpen = false;
  }
}

menuBtn.addEventListener('click', openMenu);
menuBtn.addEventListener('keydown', (e) => {
  if (e.key === 'Enter' || e.key === ' ') openMenu();
});

let loaderHidden = false;
let videoReady = false;
let sponsorsReady = false;

// Festival loader timing
const QUOTE_DURATION = 4000; // each quote = 4s
const FIRST_MIN_TIME = 3000; // first quote can close after 3s (if everything is ready)
const loaderStartTime = Date.now();
let currentQuoteStart = Date.now();
let firstQuote = true;

// =====================
// EQUATORIAL QUOTES ROTATION
// =====================
const quotes = [
  { text: "One good thing about music, when it hits you, you feel no pain.", author: "Bob Marley" },
  { text: "Music is the weapon of the future.", author: "Fela Kuti" },
  { text: "Without music, life would be a mistake.", author: "Miriam Makeba" },
  { text: "Dance is the hidden language of the soul.", author: "Caribbean proverb" },
  { text: "Where words fail, rhythm speaks.", author: "Afro-Caribbean saying" }
];

const loaderQuoteEl = document.querySelector('.loader-quote');
const loaderAuthorEl = document.querySelector('.loader-author');

// Start from a random quote every time
let quoteIndex = Math.floor(Math.random() * quotes.length);

function showQuote() {
  if (!loaderQuoteEl || !loaderAuthorEl) return;
  const q = quotes[quoteIndex % quotes.length];
  loaderQuoteEl.textContent = `"${q.text}"`;
  loaderAuthorEl.textContent = q.author;
  quoteIndex++;
  currentQuoteStart = Date.now();
}

showQuote();
setInterval(() => {
  firstQuote = false;
  showQuote();
  tryHideLoader();
}, QUOTE_DURATION);

// =====================
// LOADER CONTROL (festival rules)
// =====================
function tryHideLoader() {
  if (loaderHidden) return;
  if (!videoReady || !sponsorsReady) return;

  const now = Date.now();

  // First quote: minimum 3s from loader start (can close after 3s if ready)
  if (firstQuote) {
    if ((now - loaderStartTime) < FIRST_MIN_TIME) return;
  } else {
    // Other quotes must finish their full 4s window
    if ((now - currentQuoteStart) < QUOTE_DURATION) return;
  }

  loaderHidden = true;
  loader.classList.add('hidden');
}

// Safety fallback: never stay stuck (hard fail‑safe)
// If something blocks video or sponsors, force close loader
setTimeout(() => {
  if (!loaderHidden) {
    loaderHidden = true;
    loader.classList.add('hidden');
    videoReady = true;
    sponsorsReady = true;
  }
}, 6000);

// =====================
// VIDEO READY (robust – prevent infinite loader)
// =====================
let canPlay = false;
let isPlaying = false;

function updateVideoReady() {
  if (!videoReady && (canPlay || isPlaying)) {
    videoReady = true;
    tryHideLoader();
  }
}

// Video has enough data
video.addEventListener('canplaythrough', () => {
  canPlay = true;
  updateVideoReady();
}, { once: true });

// Video actually started
video.addEventListener('playing', () => {
  isPlaying = true;
  updateVideoReady();
});

// Mobile browsers sometimes block autoplay even if muted
video.muted = true;
video.playsInline = true;

video.play().catch(() => {
  // Try again after user interaction or short delay
  setTimeout(() => {
    video.play().catch(() => {});
  }, 1000);
});

// Hard fallback: if video still not ready after 5s, do not block loader
setTimeout(() => {
  if (!videoReady) {
    videoReady = true;
    tryHideLoader();
  }
}, 5000);

// =====================
// FAKE PAGE SCROLL (About)
// =====================
const about = document.getElementById('aboutOverlay');
let aboutOpen = false;
let scrollLock = false;

function openAbout(){
  if (aboutOpen) return;
  aboutOpen = true;
  about.classList.add('active');
  document.body.classList.add('about-open');
}

function closeAbout(){
  if (!aboutOpen) return;
  aboutOpen = false;
  about.classList.remove('active');
  document.body.classList.remove('about-open');
}

window.addEventListener('wheel', (e)=>{
  if (scrollLock) return;

  if (e.deltaY > 40 && !aboutOpen){
    scrollLock = true;
    openAbout();
    setTimeout(()=>scrollLock=false,800);
  }
  else if (e.deltaY < -40 && aboutOpen){
    scrollLock = true;
    closeAbout();
    setTimeout(()=>scrollLock=false,800);
  }
},{passive:true});

// Mobile swipe
let startY = 0;
window.addEventListener('touchstart', e=>{
  startY = e.touches[0].clientY;
},{passive:true});

window.addEventListener('touchend', e=>{
  const dy = e.changedTouches[0].clientY - startY;
  if (Math.abs(dy) < 50) return;

  if (dy < 0 && !aboutOpen) openAbout();
  if (dy > 0 && aboutOpen) closeAbout();
},{passive:true});

video.addEventListener('timeupdate', () => {
  if (video.currentTime >= LOGO_TIME) center.classList.add('show-logo');
  else center.classList.remove('show-logo');
});

video.addEventListener('ended', () => {
  center.classList.remove('show-logo');
  video.currentTime = 0;
  video.play().catch(() => {});
});

/* =====================
   SPONSORS INIT (infinite + auto drift + manual)
===================== */
(function initSponsors() {
  const host = document.getElementById('sponsors');
  const swipe = document.getElementById('swipeHint');
  const A = document.getElementById('sponsorsA');
  const B = document.getElementById('sponsorsB');

  if (!host || !A || !B) {
    sponsorsReady = true;
    tryHideLoader();
    return;
  }

  const candidates = Array.from({ length: 10 }, (_, i) => `sponsor${i + 1}.png`);
  const loaded = [];
  let checked = 0;
  let loopWidth = 0;

  // If no sponsor images exist, do NOT block the loader
  const timeoutSafety = setTimeout(() => {
    if (!sponsorsReady) {
      sponsorsReady = true;
      tryHideLoader();
    }
  }, 4000);

  candidates.forEach((src) => {
    const img = new Image();
    img.onload = () => { loaded.push(src); done(); };
    img.onerror = () => done();
    img.src = src;
  });

  function done() {
    checked++;
    if (checked === candidates.length) build();
  }

  function build() {
    clearTimeout(timeoutSafety);

    // If no sponsors found → continue without strip
    if (!loaded.length) {
      sponsorsReady = true;
      tryHideLoader();
      return;
    }

    host.style.display = 'block';
    if (swipe) swipe.style.display = 'block';

    const min = 12;
    const list = [];
    while (list.length < min) {
      for (const s of loaded) {
        list.push(s);
        if (list.length >= min) break;
      }
    }

    A.innerHTML = list.map((s, i) => (
      `<div class="sponsor"><img src="${s}" alt="Sponsor ${i + 1}" loading="lazy"></div>`
    )).join('');

    B.innerHTML = A.innerHTML;

    requestAnimationFrame(() => {
      loopWidth = A.scrollWidth;
      host.scrollLeft = loopWidth;
      sponsorsReady = true;
      tryHideLoader();
    });

    function normalizeScroll() {
      if (!loopWidth) return;
      if (host.scrollLeft < loopWidth * 0.5) host.scrollLeft += loopWidth;
      else if (host.scrollLeft > loopWidth * 1.5) host.scrollLeft -= loopWidth;
    }

    let ticking = false;
    host.addEventListener('scroll', () => {
      if (ticking) return;
      ticking = true;
      requestAnimationFrame(() => {
        ticking = false;
        normalizeScroll();
      });
    }, { passive: true });

    const autoSpeed = 0.25;
    let direction = 1;
    let lastUserScroll = Date.now();

    host.addEventListener('touchstart', () => { lastUserScroll = Date.now(); }, { passive: true });
    host.addEventListener('wheel', () => { lastUserScroll = Date.now(); }, { passive: true });
    host.addEventListener('pointerdown', () => { lastUserScroll = Date.now(); }, { passive: true });

    function autoScroll() {
      if (loopWidth) {
        if (Date.now() - lastUserScroll > 3000) {
          host.scrollLeft += autoSpeed * direction;
          normalizeScroll();

          if (host.scrollLeft > loopWidth * 1.35) direction = -1;
          else if (host.scrollLeft < loopWidth * 0.65) direction = 1;
        }
      }
      requestAnimationFrame(autoScroll);
    }

    requestAnimationFrame(autoScroll);
  }
})();

// =====================
// VISIT TRACKING (unique per day, NO refresh spam)
// =====================
(function trackVisit() {
  try {
    const KEY = 'fc_vid';
    let vid = localStorage.getItem(KEY);
    if (!vid || vid.length < 12) {
      vid = (crypto && crypto.randomUUID)
        ? crypto.randomUUID()
        : String(Date.now()) + '_' + Math.random().toString(16).slice(2);
      localStorage.setItem(KEY, vid);
    }

    fetch('https://cool-haze-b97a.tanzaniagetaway-info.workers.dev/visit', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ vid }),
      keepalive: true
    }).catch(() => {});
  } catch (_) {
    fetch('https://cool-haze-b97a.tanzaniagetaway-info.workers.dev/visit', {
      method: 'POST',
      keepalive: true
    }).catch(() => {});
  }
})();
</script>

</body>
</html>
