<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Contact — Feel Coast</title>
<meta name="description" content="Propose your location or become a sponsor with Feel Coast." />

<style>
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  background: #000;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  color: #fff;
}

.container {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 24px;
}

.form-card {
  width: 100%;
  max-width: 420px;
  background: rgba(0,0,0,0.6);
  border: 1px solid rgba(255,255,255,0.08);
  padding: 32px 24px 36px;
}

h1 {
  font-size: 18px;
  letter-spacing: 0.25em;
  margin: 0 0 24px 0;
  text-align: center;
}

label {
  display: block;
  font-size: 11px;
  letter-spacing: 0.2em;
  margin-bottom: 6px;
  opacity: 0.75;
}

input, textarea {
  width: 100%;
  background: transparent;
  border: none;
  border-bottom: 1px solid rgba(255,255,255,0.2);
  color: #fff;
  padding: 10px 4px;
  margin-bottom: 20px;
  font-size: 14px;
}

input:focus, textarea:focus {
  outline: none;
  border-bottom-color: #fff;
}

textarea {
  resize: vertical;
  min-height: 80px;
}

button {
  width: 100%;
  margin-top: 12px;
  padding: 14px;
  background: #fff;
  color: #000;
  border: none;
  font-size: 12px;
  letter-spacing: 0.35em;
  cursor: pointer;
}

.note {
  margin-top: 18px;
  font-size: 11px;
  opacity: 0.6;
  text-align: center;
}

.intro {
  font-size: 13px;
  line-height: 1.6;
  opacity: 0.8;
  margin: 0 0 28px 0;
  text-align: center;
}

.location-note {
  font-size: 11px;
  opacity: 0.6;
  margin: -8px 0 18px 0;
  text-align: center;
}

.back-home {
  position: fixed;
  top: 20px;
  left: 20px;
  z-index: 10;
  font-size: 11px;
  letter-spacing: 0.25em;
  text-decoration: none;
  color: rgba(255,255,255,0.75);
}

.back-home:hover {
  color: #fff;
}
</style>
</head>

<body>
<a href="index.html" class="back-home">← HOME</a>

<div class="container">
  <form class="form-card" id="contactForm" method="POST" novalidate>
    <h1 id="formTitle">CONTACT</h1>
    <p class="intro" id="formIntro"></p>

    <input type="hidden" name="type" id="typeField" value="" />

    <label>Business / Brand Name</label>
    <input type="text" name="business" required />

    <label>Your Name</label>
    <input type="text" name="name" required />

    <label>Email Address</label>
    <input type="email" name="email" required />

    <label>Tell us more</label>
    <textarea name="message" required placeholder="Share a few details…"></textarea>

    <div class="location-note" id="locationNote" style="display:none;">
      Locations must be based in Zanzibar (Unguja).
    </div>

    <button type="submit">SEND</button>
    <div class="note">We will get back to you shortly.</div>
  </form>
</div>

<script>
(() => {
  // ---------- UI copy from URL param ----------
  const params = new URLSearchParams(window.location.search);
  const type = (params.get('type') || 'contact').toLowerCase();

  const title = document.getElementById('formTitle');
  const intro = document.getElementById('formIntro');
  const locationNote = document.getElementById('locationNote');
  const typeField = document.getElementById('typeField');
  const form = document.getElementById('contactForm');

  typeField.value = type;

  if (type === 'location') {
    title.textContent = 'PROPOSE A LOCATION';
    intro.textContent = 'Do you own or manage a venue in Zanzibar and would like to host curated beach or sunset events with Feel Coast? Tell us about your location and your vision.';
    locationNote.style.display = 'block';
  } else if (type === 'sponsor') {
    title.textContent = 'BECOME A SPONSOR';
    intro.textContent = 'Are you a brand aligned with beach culture, travel, lifestyle or music? Partner with Feel Coast and connect with a curated international audience.';
  } else {
    title.textContent = 'CONTACT';
    intro.textContent = 'Send us a message and we’ll get back to you shortly.';
  }

  // ---------- SUBMIT → GITHUB ISSUES (via server-side bridge) ----------
  // NOTE: GitHub Pages cannot receive POST requests directly.
  // We will replace ENDPOINT with a real bridge URL (e.g., Cloudflare Worker / Netlify Function / GitHub Action relay).
  const ENDPOINT = 'https://cool-haze-b97a.tanzaniagetaway-info.workers.dev/issues';

  form.addEventListener('submit', async (e) => {
    e.preventDefault();

    // native constraint validation
    if (!form.reportValidity()) return;

    const payload = {
      type: typeField.value,
      business: form.business.value.trim(),
      name: form.name.value.trim(),
      email: form.email.value.trim(),
      message: form.message.value.trim(),
      page: window.location.href,
      createdAt: new Date().toISOString()
    };

    try {
      const res = await fetch(ENDPOINT, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
      });

      if (!res.ok) throw new Error('Network error');

      form.innerHTML = `
        <h1>THANK YOU</h1>
        <p class="intro">Your request has been received. We’ll get back to you shortly.</p>
        <div class="note">Feel Coast</div>
      `;
    } catch (err) {
      alert('Submission failed. Please try again later.');
    }
  });

  // ---------- Minimal self-tests (console) ----------
  // These do not affect UX; they help catch regressions quickly.
  (function runTests() {
    const tests = [];
    const assert = (name, condition) => tests.push({ name, pass: !!condition });

    assert('Form exists', !!form);
    assert('Type field exists', !!typeField);
    assert('Type is set', typeField.value === type);
    assert('Business input exists', !!form.business);
    assert('Email input exists', !!form.email);

    // Title should not be empty
    assert('Title populated', (title.textContent || '').trim().length > 0);

    // Location note visibility matches type
    const noteVisible = locationNote.style.display !== 'none';
    assert('Location note visible only for location', type === 'location' ? noteVisible : !noteVisible);

    // Report
    const failed = tests.filter(t => !t.pass);
    if (failed.length) {
      console.warn('[FeelCoast][Form] Tests failed:', failed);
    } else {
      console.log('[FeelCoast][Form] Tests passed:', tests.length);
    }
  })();
})();
</script>
</body>
</html>
